(function(){"use strict";const n="https://your-domain.com";chrome.runtime.onMessage.addListener((r,t,e)=>{if(r.type==="EXTRACT")return i(r.url).then(e).catch(a=>e({error:a.message})),!0;r.type==="DOWNLOAD"&&(s(r.url,r.filename),e({ok:!0}))});async function i(r){var a,o;const t=await fetch(`${n}/api/extract`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r})});if(!t.ok)return{error:(await t.json().catch(()=>({error:t.statusText}))).error??`HTTP ${t.status}`};const e=await t.json();return{formats:((a=e.metadata)==null?void 0:a.formats)??[],title:((o=e.metadata)==null?void 0:o.title)??"video"}}function s(r,t){chrome.downloads.download({url:r,filename:t.endsWith(".mp4")?t:`${t}.mp4`,saveAs:!1})}})();
